# ca-dojo

## step1

- 開発をする API の仕様を確認してみましょう。
- この MISSION ではスマートフォン向けゲームの API の開発を想定しています。
- API 仕様 YAML: https://github.com/CyberAgentHack/techtrain-mission/blob/master/api-document.yaml
- 上記の yaml ファイルの内容を SwaggerEditor の画面左半分にコピー&ペーストで入力してみましょう。
- SwaggerEditor: https://editor.swagger.io/
- 画面右半分に表示された内容が今回開発をする内容です。

## step2

開発環境を準備してみよう

- この MISSION では Go 言語と MySQL(データベース)を利用して開発を行います。
- それぞれ最新版を自身の PC に導入しましょう。
- MySQL は直接 PC へインストールでも良いですが docker を利用するとより手軽です。

## step3

- ユーザ情報を保存するテーブルを設計してみよう
- API 仕様を見ながら MySQL のテーブル定義をしましょう。
- 今回、ゲームユーザの情報(認証情報と名前)を管理するためにどのようなテーブルが必要か考えてみましょう。
- 定義が完了したら実際に MySQL に CREATE TABLE してみましょう。

## step4

- 認証情報の作成 / ユーザ情報の更新・参照 API を実装してみよう
- STEP3 で定義した DB テーブルを利用して実際に API を実装してみましょう。
- 実装対象の API は以下の 3 つです。上から順に作ってみましょう。

- /user/create ユーザアカウント認証情報作成 API
- /user/get ユーザ情報取得 API
- /user/update ユーザ情報更新 API

## step5

ガチャに関連するテーブルを設計しよう
ガチャに関連するテーブルを設計してみましょう。
具体的には

- キャラクターの不変的な内容(ID や名前など)を定義する情報テーブル
- ユーザの所持キャラクター情報を管理するテーブル
- ガチャの排出内容を定義するテーブル
  などが挙げられます。どのように排出確率を定義するかしっかりと考えながら定義をしてみましょう。

## step6

- ガチャ実行 API と所持キャラクター一覧取得 API を実装してみよう
- 上から順に
- -/gacha/draw ガチャ実行 API
- /character/list ユーザ所持キャラクター一覧取得 API を実装してみましょう。
- ガチャ実行は指定した回数分キャラクターの排出抽選を行い、ユーザの所持キャラクター情報に保存をします。
- その後ユーザ所持キャラクター一覧取得 API でガチャで獲得したキャラクター情報が取得できるか確認をしてみましょう。
